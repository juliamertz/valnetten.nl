---
import { generateImage } from "astro-eleventy-img";
import Head from "../components/Head.astro";
import Navigation from "../components/Navigation";
import "../styles/globals.css";

const { frontmatter } = Astro.props;
let img;

if (frontmatter.image)
  img = await generateImage(frontmatter.image, {
    widths: [1200, 1600],
    formats: ["avif"],
  });

const imgSrc = frontmatter.image ? img.avif[0].url : "";
---

<!DOCTYPE html>
<html lang="nl">
  <Head {...frontmatter} />
  <body class="min-h-screen">
    <Navigation client:load />
    <main>
      {imgSrc && (
        <section class="relative w-full h-64 md:h-96 lg:h-[32rem] overflow-hidden">
          <img 
            src={imgSrc} 
            alt="banner image" 
            class="absolute inset-0 w-full h-full object-cover" 
          />
          <div class="absolute inset-0 bg-black/50"></div>
          <div class="absolute inset-0 flex items-center justify-center">
            <h1 class="text-4xl md:text-5xl lg:text-6xl font-bold text-white text-center px-4">
              {frontmatter.title}
            </h1>
          </div>
        </section>
      )}
      <article class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12 prose">
        {!imgSrc && <h1 class="mb-8">{frontmatter.title}</h1>}
        <slot />
      </article>
    </main>
  </body>
</html>
